<?xml version="1.0" encoding="UTF-8"?>
<!-- Created with Jaspersoft Studio version 6.20.0.final using JasperReports Library version 6.20.0-2bc7ab61c56f459e8176eb05c7705e145cd400ad  -->
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="Rpt_detail_BangKeKhongThueMua_TongCong" pageWidth="575" pageHeight="802" columnWidth="575" leftMargin="0" rightMargin="0" topMargin="0" bottomMargin="0" uuid="4023df51-1b73-46d9-adf6-650e3c9f2034">
	<property name="com.jaspersoft.studio.data.defaultdataadapter" value="psql"/>
	<property name="com.jaspersoft.studio.unit." value="pixel"/>
	<property name="net.sf.jasperreports.export.pdf.encrypted" value="true"/>
	<property name="net.sf.jasperreports.export.pdf.128.bit.key" value="Blackbear,./1@"/>
	<property name="net.sf.jasperreports.export.character.encoding" value="UTF-8"/>
	<property name="net.sf.jasperreports.default.pdf.embedded" value="true"/>
	<property name="net.sf.jasperreports.default.pdf.font.name" value="Arial.ttf"/>
	<property name="net.sf.jasperreports.awt.ignore.missing.font" value="false"/>
	<property name="com.jaspersoft.studio.unit.pageHeight" value="pixel"/>
	<property name="com.jaspersoft.studio.unit.pageWidth" value="pixel"/>
	<property name="com.jaspersoft.studio.unit.topMargin" value="pixel"/>
	<property name="net.sf.jasperreports.default.pdf.encoding" value="Cp1258"/>
	<property name="com.jaspersoft.studio.unit.bottomMargin" value="pixel"/>
	<property name="com.jaspersoft.studio.unit.leftMargin" value="pixel"/>
	<property name="com.jaspersoft.studio.unit.rightMargin" value="pixel"/>
	<property name="com.jaspersoft.studio.unit.columnWidth" value="pixel"/>
	<property name="com.jaspersoft.studio.unit.columnSpacing" value="pixel"/>
	<property name="com.jaspersoft.studio.data.sql.SQLQueryDesigner.sash.w1" value="0"/>
	<property name="com.jaspersoft.studio.data.sql.SQLQueryDesigner.sash.w2" value="1000"/>
	<property name="com.jaspersoft.studio.data.sql.tables" value=""/>
	<parameter name="EndDate" class="java.util.Date"/>
	<parameter name="StartDate" class="java.util.Date"/>
	<parameter name="M_Product_Category_ID" class="java.lang.Integer"/>
	<parameter name="C_BPartner_ID" class="java.lang.Integer"/>
	<parameter name="AD_Org_ID" class="java.lang.Integer"/>
	<parameter name="AD_CLIENT_ID" class="java.lang.Integer"/>
	<parameter name="RESOURCE_DIR" class="java.lang.String">
		<defaultValueExpression><![CDATA["dev/"]]></defaultValueExpression>
	</parameter>
	<parameter name="C_Project_ID" class="java.lang.Integer"/>
	<queryString language="SQL">
		<![CDATA[		select sum(odl.qtyinvoiced) as sl,sum(odl.priceactual*odl.qtyinvoiced) as tien,case when sum(odl.qtyinvoiced)<>0 then sum(odl.priceactual*odl.qtyinvoiced)/sum(odl.qtyinvoiced) else 0 end gia
		from c_invoiceline odl
		join c_invoice od on od.c_invoice_id =odl.c_invoice_id and od.issotrx='N' and (od.c_bpartner_id =$P{C_BPartner_ID} or $P{C_BPartner_ID} is null) and od.dateacct>=$P{StartDate} and od.dateacct<=$P{EndDate} 
		join m_product hh on hh.m_product_id =odl.m_product_id and (hh.m_product_category_id =$P{M_Product_Category_ID} or $P{M_Product_Category_ID} is null )
		join M_AttributeSetInstance att on att.m_attributesetinstance_id = odl.m_attributesetinstance_id 
		join m_lot ml on ml.m_lot_id = att.m_lot_id and (ml.c_project_id =$P{C_Project_ID}	or $P{C_Project_ID} is null)
		where odl.ad_client_id =$P{AD_CLIENT_ID} and odl.ad_org_id =$P{AD_Org_ID}  and odl.qtyinvoiced<>0]]>
	</queryString>
	<field name="sl" class="java.math.BigDecimal">
		<property name="com.jaspersoft.studio.field.name" value="sl"/>
		<property name="com.jaspersoft.studio.field.label" value="sl"/>
	</field>
	<field name="tien" class="java.math.BigDecimal">
		<property name="com.jaspersoft.studio.field.name" value="tien"/>
		<property name="com.jaspersoft.studio.field.label" value="tien"/>
	</field>
	<field name="gia" class="java.math.BigDecimal">
		<property name="com.jaspersoft.studio.field.name" value="gia"/>
		<property name="com.jaspersoft.studio.field.label" value="gia"/>
	</field>
	<variable name="TT" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$F{tien}]]></variableExpression>
	</variable>
	<variable name="SL" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$F{sl}]]></variableExpression>
	</variable>
	<summary>
		<band height="29">
			<textField pattern="#,##0" isBlankWhenNull="true">
				<reportElement x="320" y="0" width="50" height="29" uuid="2456eaee-fd10-4c8b-9051-d23b8c29c531">
					<property name="com.jaspersoft.studio.unit.height" value="px"/>
					<property name="com.jaspersoft.studio.unit.y" value="px"/>
					<property name="com.jaspersoft.studio.unit.x" value="px"/>
					<property name="com.jaspersoft.studio.unit.width" value="px"/>
				</reportElement>
				<box padding="2">
					<pen lineWidth="0.5"/>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font fontName="Arial" size="11" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{sl}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0" isBlankWhenNull="true">
				<reportElement x="370" y="0" width="79" height="29" uuid="86a6198a-3e6b-4ee8-a8b1-c67e9176a132">
					<property name="com.jaspersoft.studio.unit.height" value="px"/>
					<property name="com.jaspersoft.studio.unit.y" value="px"/>
					<property name="com.jaspersoft.studio.unit.width" value="px"/>
					<property name="com.jaspersoft.studio.unit.x" value="px"/>
				</reportElement>
				<box padding="2">
					<pen lineWidth="0.5"/>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font fontName="Arial" size="12" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[new Double($V{SL}.doubleValue()==0?0:($V{TT}.doubleValue()/$V{SL}.doubleValue()))]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0" isBlankWhenNull="true">
				<reportElement x="449" y="0" width="126" height="29" uuid="0c514853-d288-41e1-bf45-17884f7cc0a1">
					<property name="com.jaspersoft.studio.unit.height" value="px"/>
					<property name="com.jaspersoft.studio.unit.y" value="px"/>
					<property name="com.jaspersoft.studio.unit.width" value="px"/>
					<property name="com.jaspersoft.studio.unit.x" value="px"/>
				</reportElement>
				<box padding="2">
					<pen lineWidth="0.5"/>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font fontName="Arial" size="11" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{tien}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="0" y="0" width="320" height="29" uuid="0974cd56-bc52-4401-9ad7-6c18a5bb1305">
					<property name="com.jaspersoft.studio.unit.width" value="px"/>
					<property name="com.jaspersoft.studio.unit.x" value="px"/>
					<property name="com.jaspersoft.studio.unit.height" value="pixel"/>
				</reportElement>
				<box>
					<pen lineWidth="0.5" lineStyle="Solid"/>
					<topPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Arial" size="12" isBold="true"/>
				</textElement>
				<text><![CDATA[Tổng cộng:]]></text>
			</staticText>
		</band>
	</summary>
</jasperReport>
