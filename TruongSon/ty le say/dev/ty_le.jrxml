<?xml version="1.0" encoding="UTF-8"?>
<!-- Created with Jaspersoft Studio version 6.4.3.final using JasperReports Library version 6.4.3  -->
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="ty_le" pageWidth="751" pageHeight="612" orientation="Landscape" columnWidth="751" leftMargin="0" rightMargin="0" topMargin="0" bottomMargin="0" uuid="7312bf15-acd5-4dd7-a33c-7fbd6fbb9f79">
	<property name="com.jaspersoft.studio.data.defaultdataadapter" value="HSV"/>
	<property name="com.jaspersoft.studio.data.sql.tables" value=""/>
	<property name="com.jaspersoft.studio.data.sql.SQLQueryDesigner.sash.w1" value="0"/>
	<property name="com.jaspersoft.studio.data.sql.SQLQueryDesigner.sash.w2" value="1000"/>
	<parameter name="StartDate" class="java.util.Date">
		<defaultValueExpression><![CDATA[new Date(218,0,1)]]></defaultValueExpression>
	</parameter>
	<parameter name="EndDate" class="java.util.Date">
		<defaultValueExpression><![CDATA[NOW()]]></defaultValueExpression>
	</parameter>
	<parameter name="AD_Org_ID" class="java.lang.Integer"/>
	<parameter name="AD_CLIENT_ID" class="java.lang.Integer"/>
	<queryString>
		<![CDATA[select id, case when sum(a10)<> 0 then round(sum(a9)/sum(a10),2) else 0 end as a10 from(

SELECT '1' as id, a7+a8 - a5 AS a9, 0 as a10  FROM
( 
SELECT '1' AS stt,id,'Ván Bóc tươi :  loại A' AS a2, sum(a3) AS a3,sum(a4) AS a4,sum(a5) AS a5,sum(a6) AS a6,sum(a7) AS a7,sum(a8) AS a8
FROM (
SELECT '2' AS "id", sum(inv.productionqty) AS a3, 0 AS a4, 0 AS a5, 0 AS a6, 0 AS a7, 0 AS a8 FROM m_production iv
INNER JOIN m_productionplan inv ON iv.m_production_id = inv.m_production_id 
WHERE iv.ad_client_id=$P{AD_CLIENT_ID} AND iv.docstatus IN ('CO','CL') AND (iv.AD_Org_ID=$P{AD_Org_ID} OR $P{AD_Org_ID} IS NULL) AND inv.M_Product_ID=1004077 AND iv.movementdate >=$P{StartDate} AND iv.movementdate<=$P{EndDate}

UNION ALL

SELECT '2' AS "id",0 AS a3, sum(inv.movementqty) AS a4,0 AS a5, 0 AS a6, 0 AS a7, 0 AS a8 FROM m_inout iv
INNER JOIN m_inoutline inv ON iv.m_inout_id = inv.m_inout_id  AND issotrx = 'N'
WHERE iv.ad_client_id=$P{AD_CLIENT_ID} AND iv.docstatus IN ('CO','CL') AND (iv.AD_Org_ID=$P{AD_Org_ID} OR $P{AD_Org_ID} IS NULL) AND  inv.M_Product_ID=1004077 AND iv.movementdate >=$P{StartDate} AND iv.movementdate<=$P{EndDate}

UNION ALL

SELECT '2' AS "id",0 AS a3, 0 AS a4, sum(CASE WHEN inv.qtybook < inv.qtycount THEN inv.qtycount-inv.qtybook ELSE 0 END) AS a5, 0 AS a6, 0 AS a7, 0 AS a8 FROM M_Inventory iv 
INNER JOIN m_inventoryline inv ON iv.M_Inventory_id = inv.M_Inventory_id AND iv.c_doctype_id = 1000323 
WHERE iv.ad_client_id=$P{AD_CLIENT_ID} AND iv.docstatus IN ('CO','CL') AND (iv.AD_Org_ID=$P{AD_Org_ID} OR $P{AD_Org_ID} IS NULL) AND inv.M_Product_ID=1004077 AND iv.movementdate >=$P{StartDate} AND iv.movementdate<=$P{EndDate}

UNION ALL

SELECT '2' AS "id",0 AS a3, 0 AS a4, 0 AS a5,sum(inv.movementqty) AS a6, 0 AS a7, 0 AS a8 FROM m_inout iv
INNER JOIN m_inoutline inv ON iv.m_inout_id = inv.m_inout_id  AND issotrx = 'Y'
WHERE iv.ad_client_id=$P{AD_CLIENT_ID} AND iv.docstatus IN ('CO','CL') AND (iv.AD_Org_ID=$P{AD_Org_ID} OR $P{AD_Org_ID} IS NULL) AND  inv.M_Product_ID=1004077 AND iv.movementdate >=$P{StartDate} AND iv.movementdate<=$P{EndDate}

UNION ALL
SELECT '2' AS "id",0 AS a3, 0 AS a4, 0 AS a5, 0 AS a6, sum(inv.qtyinternaluse) AS a7, 0 AS a8 FROM m_inventory iv 
INNER JOIN m_inventoryline inv ON iv.m_inventory_id = inv.m_inventory_id AND  iv.c_doctype_id =1000326 
WHERE iv.ad_client_id=$P{AD_CLIENT_ID} AND iv.docstatus IN ('CO','CL') AND (iv.AD_Org_ID=$P{AD_Org_ID} OR $P{AD_Org_ID} IS NULL) AND inv.M_Product_ID=1004077 AND iv.movementdate >=$P{StartDate} AND iv.movementdate<=$P{EndDate}
UNION ALL

SELECT '2' AS "id",0 AS a3, 0 AS a4, 0 AS a5, 0 AS a6,0 AS a7, sum(CASE WHEN inv.qtybook > inv.qtycount THEN inv.qtybook-inv.qtycount ELSE 0 END) AS a8
FROM M_Inventory iv 
INNER JOIN m_inventoryline inv ON iv.M_Inventory_id = inv.M_Inventory_id AND iv.c_doctype_id = 1000323 
WHERE iv.ad_client_id=$P{AD_CLIENT_ID} AND iv.docstatus IN ('CO','CL') AND (iv.AD_Org_ID=$P{AD_Org_ID} OR $P{AD_Org_ID} IS NULL) AND inv.M_Product_ID=1004077 AND iv.movementdate >=$P{StartDate} AND iv.movementdate<=$P{EndDate}
) AS k GROUP BY id
UNION ALL
SELECT '2' AS stt,id,'Ván Bóc tươi :  loại B' AS a2, sum(a3) AS a3,sum(a4) AS a4,sum(a5) AS a5,sum(a6) AS a6,sum(a7) AS a7,sum(a8) AS a8
FROM (
SELECT '3' AS "id", sum(inv.productionqty) AS a3, 0 AS a4, 0 AS a5, 0 AS a6, 0 AS a7, 0 AS a8 FROM m_production iv
INNER JOIN m_productionplan inv ON iv.m_production_id = inv.m_production_id 
WHERE iv.ad_client_id=$P{AD_CLIENT_ID} AND iv.docstatus IN ('CO','CL') AND (iv.AD_Org_ID=$P{AD_Org_ID} OR $P{AD_Org_ID} IS NULL) AND inv.M_Product_ID=1004076 AND iv.movementdate >=$P{StartDate} AND iv.movementdate<=$P{EndDate}

UNION ALL

SELECT '3' AS "id",0 AS a3, sum(inv.movementqty) AS a4,0 AS a5, 0 AS a6, 0 AS a7, 0 AS a8 FROM m_inout iv
INNER JOIN m_inoutline inv ON iv.m_inout_id = inv.m_inout_id  AND issotrx = 'N'
WHERE iv.ad_client_id=$P{AD_CLIENT_ID} AND iv.docstatus IN ('CO','CL') AND (iv.AD_Org_ID=$P{AD_Org_ID} OR $P{AD_Org_ID} IS NULL) AND  inv.M_Product_ID=1004076 AND iv.movementdate >=$P{StartDate} AND iv.movementdate<=$P{EndDate}

UNION ALL

SELECT '3' AS "id",0 AS a3, 0 AS a4, sum(CASE WHEN inv.qtybook < inv.qtycount THEN inv.qtycount-inv.qtybook ELSE 0 END) AS a5, 0 AS a6, 0 AS a7, 0 AS a8 FROM M_Inventory iv 
INNER JOIN m_inventoryline inv ON iv.M_Inventory_id = inv.M_Inventory_id AND iv.c_doctype_id = 1000323 
WHERE iv.ad_client_id=$P{AD_CLIENT_ID} AND iv.docstatus IN ('CO','CL') AND (iv.AD_Org_ID=$P{AD_Org_ID} OR $P{AD_Org_ID} IS NULL) AND inv.M_Product_ID=1004076 AND iv.movementdate >=$P{StartDate} AND iv.movementdate<=$P{EndDate}

UNION ALL

SELECT '3' AS "id",0 AS a3, 0 AS a4, 0 AS a5,sum(inv.movementqty) AS a6, 0 AS a7, 0 AS a8 FROM m_inout iv
INNER JOIN m_inoutline inv ON iv.m_inout_id = inv.m_inout_id  AND issotrx = 'Y'
WHERE iv.ad_client_id=$P{AD_CLIENT_ID} AND iv.docstatus IN ('CO','CL') AND (iv.AD_Org_ID=$P{AD_Org_ID} OR $P{AD_Org_ID} IS NULL) AND  inv.M_Product_ID=1004076 AND iv.movementdate >=$P{StartDate} AND iv.movementdate<=$P{EndDate}

UNION ALL
SELECT '3' AS "id",0 AS a3, 0 AS a4, 0 AS a5, 0 AS a6, sum(inv.qtyinternaluse) AS a7, 0 AS a8 FROM m_inventory iv 
INNER JOIN m_inventoryline inv ON iv.m_inventory_id = inv.m_inventory_id AND  iv.c_doctype_id =1000326 
WHERE iv.ad_client_id=$P{AD_CLIENT_ID} AND iv.docstatus IN ('CO','CL') AND (iv.AD_Org_ID=$P{AD_Org_ID} OR $P{AD_Org_ID} IS NULL) AND inv.M_Product_ID=1004076 AND iv.movementdate >=$P{StartDate} AND iv.movementdate<=$P{EndDate}
UNION ALL

SELECT '3' AS "id",0 AS a3, 0 AS a4, 0 AS a5, 0 AS a6,0 AS a7, sum(CASE WHEN inv.qtybook > inv.qtycount THEN inv.qtybook-inv.qtycount ELSE 0 END) AS a8
FROM M_Inventory iv 
INNER JOIN m_inventoryline inv ON iv.M_Inventory_id = inv.M_Inventory_id AND iv.c_doctype_id = 1000323 
WHERE iv.ad_client_id=$P{AD_CLIENT_ID} AND iv.docstatus IN ('CO','CL') AND (iv.AD_Org_ID=$P{AD_Org_ID} OR $P{AD_Org_ID} IS NULL) AND inv.M_Product_ID=1004076 AND iv.movementdate >=$P{StartDate} AND iv.movementdate<=$P{EndDate}
) AS k GROUP BY id
UNION ALL
SELECT '3' AS stt,id,'Ván Bóc tươi :  loại C' AS a2, sum(a3) AS a3,sum(a4) AS a4,sum(a5) AS a5,sum(a6) AS a6,sum(a7) AS a7,sum(a8) AS a8
FROM (
SELECT '4' AS "id", sum(inv.productionqty) AS a3, 0 AS a4, 0 AS a5, 0 AS a6, 0 AS a7, 0 AS a8 FROM m_production iv
INNER JOIN m_productionplan inv ON iv.m_production_id = inv.m_production_id 
WHERE iv.ad_client_id=$P{AD_CLIENT_ID} AND iv.docstatus IN ('CO','CL') AND (iv.AD_Org_ID=$P{AD_Org_ID} OR $P{AD_Org_ID} IS NULL) AND inv.M_Product_ID=1004079 AND iv.movementdate >=$P{StartDate} AND iv.movementdate<=$P{EndDate}

UNION ALL

SELECT '4' AS "id",0 AS a3, sum(inv.movementqty) AS a4,0 AS a5, 0 AS a6, 0 AS a7, 0 AS a8 FROM m_inout iv
INNER JOIN m_inoutline inv ON iv.m_inout_id = inv.m_inout_id  AND issotrx = 'N'
WHERE iv.ad_client_id=$P{AD_CLIENT_ID} AND iv.docstatus IN ('CO','CL') AND (iv.AD_Org_ID=$P{AD_Org_ID} OR $P{AD_Org_ID} IS NULL) AND  inv.M_Product_ID=1004079 AND iv.movementdate >=$P{StartDate} AND iv.movementdate<=$P{EndDate}

UNION ALL

SELECT '4' AS "id",0 AS a3, 0 AS a4, sum(CASE WHEN inv.qtybook < inv.qtycount THEN inv.qtycount-inv.qtybook ELSE 0 END) AS a5, 0 AS a6, 0 AS a7, 0 AS a8 FROM M_Inventory iv 
INNER JOIN m_inventoryline inv ON iv.M_Inventory_id = inv.M_Inventory_id AND iv.c_doctype_id = 1000323 
WHERE iv.ad_client_id=$P{AD_CLIENT_ID} AND iv.docstatus IN ('CO','CL') AND (iv.AD_Org_ID=$P{AD_Org_ID} OR $P{AD_Org_ID} IS NULL) AND inv.M_Product_ID=1004079 AND iv.movementdate >=$P{StartDate} AND iv.movementdate<=$P{EndDate}

UNION ALL

SELECT '4' AS "id",0 AS a3, 0 AS a4, 0 AS a5,sum(inv.movementqty) AS a6, 0 AS a7, 0 AS a8 FROM m_inout iv
INNER JOIN m_inoutline inv ON iv.m_inout_id = inv.m_inout_id  AND issotrx = 'Y'
WHERE iv.ad_client_id=$P{AD_CLIENT_ID} AND iv.docstatus IN ('CO','CL') AND (iv.AD_Org_ID=$P{AD_Org_ID} OR $P{AD_Org_ID} IS NULL) AND  inv.M_Product_ID=1004079 AND iv.movementdate >=$P{StartDate} AND iv.movementdate<=$P{EndDate}

UNION ALL
SELECT '4' AS "id",0 AS a3, 0 AS a4, 0 AS a5, 0 AS a6, sum(inv.qtyinternaluse) AS a7, 0 AS a8 FROM m_inventory iv 
INNER JOIN m_inventoryline inv ON iv.m_inventory_id = inv.m_inventory_id AND  iv.c_doctype_id =1000326 
WHERE iv.ad_client_id=$P{AD_CLIENT_ID} AND iv.docstatus IN ('CO','CL') AND (iv.AD_Org_ID=$P{AD_Org_ID} OR $P{AD_Org_ID} IS NULL) AND inv.M_Product_ID=1004079 AND iv.movementdate >=$P{StartDate} AND iv.movementdate<=$P{EndDate}
UNION ALL

SELECT '4' AS "id",0 AS a3, 0 AS a4, 0 AS a5, 0 AS a6,0 AS a7, sum(CASE WHEN inv.qtybook > inv.qtycount THEN inv.qtybook-inv.qtycount ELSE 0 END) AS a8
FROM M_Inventory iv 
INNER JOIN m_inventoryline inv ON iv.M_Inventory_id = inv.M_Inventory_id AND iv.c_doctype_id = 1000323 
WHERE iv.ad_client_id=$P{AD_CLIENT_ID} AND iv.docstatus IN ('CO','CL') AND (iv.AD_Org_ID=$P{AD_Org_ID} OR $P{AD_Org_ID} IS NULL) AND inv.M_Product_ID=1004079 AND iv.movementdate >=$P{StartDate} AND iv.movementdate<=$P{EndDate}
) AS k GROUP BY id
) as t
UNION ALL
SELECT '1' as id,(a7+a8) - (a5+a3) AS a9, 0 as a10 FROM
( 
SELECT '4' AS stt,id,'Ván tươi  đang sấy dở' AS a2, sum(a3) AS a3,sum(a4) AS a4,sum(a5) AS a5,sum(a6) AS a6,sum(a7) AS a7,sum(a8) AS a8
FROM (
SELECT '5' AS "id", sum(inv.productionqty) AS a3, 0 AS a4, 0 AS a5, 0 AS a6, 0 AS a7, 0 AS a8 FROM m_production iv
INNER JOIN m_productionplan inv ON iv.m_production_id = inv.m_production_id 
WHERE iv.ad_client_id=$P{AD_CLIENT_ID} AND iv.docstatus IN ('CO','CL') AND (iv.AD_Org_ID=$P{AD_Org_ID} OR $P{AD_Org_ID} IS NULL) AND inv.M_Product_ID=1013224 AND iv.movementdate >=$P{StartDate} AND iv.movementdate<=$P{EndDate}

UNION ALL

SELECT '5' AS "id",0 AS a3, sum(inv.movementqty) AS a4,0 AS a5, 0 AS a6, 0 AS a7, 0 AS a8 FROM m_inout iv
INNER JOIN m_inoutline inv ON iv.m_inout_id = inv.m_inout_id  AND issotrx = 'N'
WHERE iv.ad_client_id=$P{AD_CLIENT_ID} AND iv.docstatus IN ('CO','CL') AND (iv.AD_Org_ID=$P{AD_Org_ID} OR $P{AD_Org_ID} IS NULL) AND  inv.M_Product_ID=1013224 AND iv.movementdate >=$P{StartDate} AND iv.movementdate<=$P{EndDate}

UNION ALL

SELECT '5' AS "id",0 AS a3, 0 AS a4, sum(CASE WHEN inv.qtybook < inv.qtycount THEN inv.qtycount-inv.qtybook ELSE 0 END) AS a5, 0 AS a6, 0 AS a7, 0 AS a8 FROM M_Inventory iv 
INNER JOIN m_inventoryline inv ON iv.M_Inventory_id = inv.M_Inventory_id AND iv.c_doctype_id = 1000323 
WHERE iv.ad_client_id=$P{AD_CLIENT_ID} AND iv.docstatus IN ('CO','CL') AND (iv.AD_Org_ID=$P{AD_Org_ID} OR $P{AD_Org_ID} IS NULL) AND inv.M_Product_ID=1013224 AND iv.movementdate >=$P{StartDate} AND iv.movementdate<=$P{EndDate}

UNION ALL

SELECT '5' AS "id",0 AS a3, 0 AS a4, 0 AS a5,sum(inv.movementqty) AS a6, 0 AS a7, 0 AS a8 FROM m_inout iv
INNER JOIN m_inoutline inv ON iv.m_inout_id = inv.m_inout_id  AND issotrx = 'Y'
WHERE iv.ad_client_id=$P{AD_CLIENT_ID} AND iv.docstatus IN ('CO','CL') AND (iv.AD_Org_ID=$P{AD_Org_ID} OR $P{AD_Org_ID} IS NULL) AND  inv.M_Product_ID=1013224 AND iv.movementdate >=$P{StartDate} AND iv.movementdate<=$P{EndDate}

UNION ALL
SELECT '5' AS "id",0 AS a3, 0 AS a4, 0 AS a5, 0 AS a6, sum(inv.qtyinternaluse) AS a7, 0 AS a8 FROM m_inventory iv 
INNER JOIN m_inventoryline inv ON iv.m_inventory_id = inv.m_inventory_id AND  iv.c_doctype_id =1000326 
WHERE iv.ad_client_id=$P{AD_CLIENT_ID} AND iv.docstatus IN ('CO','CL') AND (iv.AD_Org_ID=$P{AD_Org_ID} OR $P{AD_Org_ID} IS NULL) AND inv.M_Product_ID=1013224 AND iv.movementdate >=$P{StartDate} AND iv.movementdate<=$P{EndDate}
UNION ALL

SELECT '5' AS "id",0 AS a3, 0 AS a4, 0 AS a5, 0 AS a6,0 AS a7, sum(CASE WHEN inv.qtybook > inv.qtycount THEN inv.qtybook-inv.qtycount ELSE 0 END) AS a8
FROM M_Inventory iv 
INNER JOIN m_inventoryline inv ON iv.M_Inventory_id = inv.M_Inventory_id AND iv.c_doctype_id = 1000323 
WHERE iv.ad_client_id=$P{AD_CLIENT_ID} AND iv.docstatus IN ('CO','CL') AND (iv.AD_Org_ID=$P{AD_Org_ID} OR $P{AD_Org_ID} IS NULL) AND inv.M_Product_ID=1013224 AND iv.movementdate >=$P{StartDate} AND iv.movementdate<=$P{EndDate}
) AS k GROUP BY id
) AS t
UNION ALL
SELECT '1' as id, 0 as a9, (a3+a5) - a8 AS a10 
FROM (
SELECT '1' AS stt,id,'Ván sấy,khô : loại A+' AS a2, sum(a3) AS a3,sum(a4) AS a4,sum(a5) AS a5,sum(a6) AS a6,sum(a7) AS a7,sum(a8) AS a8
FROM (
SELECT '7' AS "id", sum(inv.productionqty) AS a3, 0 AS a4, 0 AS a5, 0 AS a6, 0 AS a7, 0 AS a8 FROM m_production iv
INNER JOIN m_productionplan inv ON iv.m_production_id = inv.m_production_id 
WHERE iv.ad_client_id=$P{AD_CLIENT_ID} AND iv.docstatus IN ('CO','CL') AND (iv.AD_Org_ID=$P{AD_Org_ID} OR $P{AD_Org_ID} IS NULL) AND inv.M_Product_ID=1004073 AND iv.movementdate >=$P{StartDate} AND iv.movementdate<=$P{EndDate}

UNION ALL

SELECT '7' AS "id",0 AS a3, sum(inv.movementqty) AS a4,0 AS a5, 0 AS a6, 0 AS a7, 0 AS a8 FROM m_inout iv
INNER JOIN m_inoutline inv ON iv.m_inout_id = inv.m_inout_id  AND issotrx = 'N'
WHERE iv.ad_client_id=$P{AD_CLIENT_ID} AND iv.docstatus IN ('CO','CL') AND (iv.AD_Org_ID=$P{AD_Org_ID} OR $P{AD_Org_ID} IS NULL) AND  inv.M_Product_ID=1004073 AND iv.movementdate >=$P{StartDate} AND iv.movementdate<=$P{EndDate}

UNION ALL

SELECT '7' AS "id",0 AS a3, 0 AS a4, sum(CASE WHEN inv.qtybook < inv.qtycount THEN inv.qtycount-inv.qtybook ELSE 0 END) AS a5, 0 AS a6, 0 AS a7, 0 AS a8 FROM M_Inventory iv 
INNER JOIN m_inventoryline inv ON iv.M_Inventory_id = inv.M_Inventory_id AND iv.c_doctype_id = 1000323 
WHERE iv.ad_client_id=$P{AD_CLIENT_ID} AND iv.docstatus IN ('CO','CL') AND (iv.AD_Org_ID=$P{AD_Org_ID} OR $P{AD_Org_ID} IS NULL) AND inv.M_Product_ID=1004073 AND iv.movementdate >=$P{StartDate} AND iv.movementdate<=$P{EndDate}

UNION ALL

SELECT '7' AS "id",0 AS a3, 0 AS a4, 0 AS a5,sum(inv.movementqty) AS a6, 0 AS a7, 0 AS a8 FROM m_inout iv
INNER JOIN m_inoutline inv ON iv.m_inout_id = inv.m_inout_id  AND issotrx = 'Y'
WHERE iv.ad_client_id=$P{AD_CLIENT_ID} AND iv.docstatus IN ('CO','CL') AND (iv.AD_Org_ID=$P{AD_Org_ID} OR $P{AD_Org_ID} IS NULL) AND  inv.M_Product_ID=1004073 AND iv.movementdate >=$P{StartDate} AND iv.movementdate<=$P{EndDate}

UNION ALL
SELECT '7' AS "id",0 AS a3, 0 AS a4, 0 AS a5, 0 AS a6, sum(inv.qtyinternaluse) AS a7, 0 AS a8 FROM m_inventory iv 
INNER JOIN m_inventoryline inv ON iv.m_inventory_id = inv.m_inventory_id AND  iv.c_doctype_id =1000326 
WHERE iv.ad_client_id=$P{AD_CLIENT_ID} AND iv.docstatus IN ('CO','CL') AND (iv.AD_Org_ID=$P{AD_Org_ID} OR $P{AD_Org_ID} IS NULL) AND inv.M_Product_ID=1004073 AND iv.movementdate >=$P{StartDate} AND iv.movementdate<=$P{EndDate}
UNION ALL

SELECT '7' AS "id",0 AS a3, 0 AS a4, 0 AS a5, 0 AS a6,0 AS a7, sum(CASE WHEN inv.qtybook > inv.qtycount THEN inv.qtybook-inv.qtycount ELSE 0 END) AS a8
FROM M_Inventory iv 
INNER JOIN m_inventoryline inv ON iv.M_Inventory_id = inv.M_Inventory_id AND iv.c_doctype_id = 1000323 
WHERE iv.ad_client_id=$P{AD_CLIENT_ID} AND iv.docstatus IN ('CO','CL') AND (iv.AD_Org_ID=$P{AD_Org_ID} OR $P{AD_Org_ID} IS NULL) AND inv.M_Product_ID=1004073 AND iv.movementdate >=$P{StartDate} AND iv.movementdate<=$P{EndDate}
) AS k GROUP BY id
UNION ALL
SELECT '1' AS stt,id,'Ván sấy,khô loại A' AS a2, sum(a3) AS a3,sum(a4) AS a4,sum(a5) AS a5,sum(a6) AS a6,sum(a7) AS a7,sum(a8) AS a8
FROM (
SELECT '8' AS "id", sum(inv.productionqty) AS a3, 0 AS a4, 0 AS a5, 0 AS a6, 0 AS a7, 0 AS a8 FROM m_production iv
INNER JOIN m_productionplan inv ON iv.m_production_id = inv.m_production_id 
WHERE iv.ad_client_id=$P{AD_CLIENT_ID} AND iv.docstatus IN ('CO','CL') AND (iv.AD_Org_ID=$P{AD_Org_ID} OR $P{AD_Org_ID} IS NULL) AND inv.M_Product_ID=1004071 AND iv.movementdate >=$P{StartDate} AND iv.movementdate<=$P{EndDate}

UNION ALL

SELECT '8' AS "id",0 AS a3, sum(inv.movementqty) AS a4,0 AS a5, 0 AS a6, 0 AS a7, 0 AS a8 FROM m_inout iv
INNER JOIN m_inoutline inv ON iv.m_inout_id = inv.m_inout_id  AND issotrx = 'N'
WHERE iv.ad_client_id=$P{AD_CLIENT_ID} AND iv.docstatus IN ('CO','CL') AND (iv.AD_Org_ID=$P{AD_Org_ID} OR $P{AD_Org_ID} IS NULL) AND  inv.M_Product_ID=1004071 AND iv.movementdate >=$P{StartDate} AND iv.movementdate<=$P{EndDate}

UNION ALL

SELECT '8' AS "id",0 AS a3, 0 AS a4, sum(CASE WHEN inv.qtybook < inv.qtycount THEN inv.qtycount-inv.qtybook ELSE 0 END) AS a5, 0 AS a6, 0 AS a7, 0 AS a8 FROM M_Inventory iv 
INNER JOIN m_inventoryline inv ON iv.M_Inventory_id = inv.M_Inventory_id AND iv.c_doctype_id = 1000323 
WHERE iv.ad_client_id=$P{AD_CLIENT_ID} AND iv.docstatus IN ('CO','CL') AND (iv.AD_Org_ID=$P{AD_Org_ID} OR $P{AD_Org_ID} IS NULL) AND inv.M_Product_ID=1004071 AND iv.movementdate >=$P{StartDate} AND iv.movementdate<=$P{EndDate}

UNION ALL

SELECT '8' AS "id",0 AS a3, 0 AS a4, 0 AS a5,sum(inv.movementqty) AS a6, 0 AS a7, 0 AS a8 FROM m_inout iv
INNER JOIN m_inoutline inv ON iv.m_inout_id = inv.m_inout_id  AND issotrx = 'Y'
WHERE iv.ad_client_id=$P{AD_CLIENT_ID} AND iv.docstatus IN ('CO','CL') AND (iv.AD_Org_ID=$P{AD_Org_ID} OR $P{AD_Org_ID} IS NULL) AND  inv.M_Product_ID=1004071 AND iv.movementdate >=$P{StartDate} AND iv.movementdate<=$P{EndDate}

UNION ALL
SELECT '8' AS "id",0 AS a3, 0 AS a4, 0 AS a5, 0 AS a6, sum(inv.qtyinternaluse) AS a7, 0 AS a8 FROM m_inventory iv 
INNER JOIN m_inventoryline inv ON iv.m_inventory_id = inv.m_inventory_id AND  iv.c_doctype_id =1000326 
WHERE iv.ad_client_id=$P{AD_CLIENT_ID} AND iv.docstatus IN ('CO','CL') AND (iv.AD_Org_ID=$P{AD_Org_ID} OR $P{AD_Org_ID} IS NULL) AND inv.M_Product_ID=1004071 AND iv.movementdate >=$P{StartDate} AND iv.movementdate<=$P{EndDate}
UNION ALL

SELECT '8' AS "id",0 AS a3, 0 AS a4, 0 AS a5, 0 AS a6,0 AS a7, sum(CASE WHEN inv.qtybook > inv.qtycount THEN inv.qtybook-inv.qtycount ELSE 0 END) AS a8
FROM M_Inventory iv 
INNER JOIN m_inventoryline inv ON iv.M_Inventory_id = inv.M_Inventory_id AND iv.c_doctype_id = 1000323 
WHERE iv.ad_client_id=$P{AD_CLIENT_ID} AND iv.docstatus IN ('CO','CL') AND (iv.AD_Org_ID=$P{AD_Org_ID} OR $P{AD_Org_ID} IS NULL) AND inv.M_Product_ID=1004071 AND iv.movementdate >=$P{StartDate} AND iv.movementdate<=$P{EndDate}
) AS k GROUP BY id
UNION ALL
SELECT '3' AS stt,id,'Ván sấy,khô loại B' AS a2, sum(a3) AS a3,sum(a4) AS a4,sum(a5) AS a5,sum(a6) AS a6,sum(a7) AS a7,sum(a8) AS a8
FROM (
SELECT '9' AS "id", sum(inv.productionqty) AS a3, 0 AS a4, 0 AS a5, 0 AS a6, 0 AS a7, 0 AS a8 FROM m_production iv
INNER JOIN m_productionplan inv ON iv.m_production_id = inv.m_production_id 
WHERE iv.ad_client_id=$P{AD_CLIENT_ID} AND iv.docstatus IN ('CO','CL') AND (iv.AD_Org_ID=$P{AD_Org_ID} OR $P{AD_Org_ID} IS NULL) AND inv.M_Product_ID=1004072 AND iv.movementdate >=$P{StartDate} AND iv.movementdate<=$P{EndDate}

UNION ALL

SELECT '9' AS "id",0 AS a3, sum(inv.movementqty) AS a4,0 AS a5, 0 AS a6, 0 AS a7, 0 AS a8 FROM m_inout iv
INNER JOIN m_inoutline inv ON iv.m_inout_id = inv.m_inout_id  AND issotrx = 'N'
WHERE iv.ad_client_id=$P{AD_CLIENT_ID} AND iv.docstatus IN ('CO','CL') AND (iv.AD_Org_ID=$P{AD_Org_ID} OR $P{AD_Org_ID} IS NULL) AND  inv.M_Product_ID=1004072 AND iv.movementdate >=$P{StartDate} AND iv.movementdate<=$P{EndDate}

UNION ALL

SELECT '9' AS "id",0 AS a3, 0 AS a4, sum(CASE WHEN inv.qtybook < inv.qtycount THEN inv.qtycount-inv.qtybook ELSE 0 END) AS a5, 0 AS a6, 0 AS a7, 0 AS a8 FROM M_Inventory iv 
INNER JOIN m_inventoryline inv ON iv.M_Inventory_id = inv.M_Inventory_id AND iv.c_doctype_id = 1000323 
WHERE iv.ad_client_id=$P{AD_CLIENT_ID} AND iv.docstatus IN ('CO','CL') AND (iv.AD_Org_ID=$P{AD_Org_ID} OR $P{AD_Org_ID} IS NULL) AND inv.M_Product_ID=1004072 AND iv.movementdate >=$P{StartDate} AND iv.movementdate<=$P{EndDate}

UNION ALL

SELECT '9' AS "id",0 AS a3, 0 AS a4, 0 AS a5,sum(inv.movementqty) AS a6, 0 AS a7, 0 AS a8 FROM m_inout iv
INNER JOIN m_inoutline inv ON iv.m_inout_id = inv.m_inout_id  AND issotrx = 'Y'
WHERE iv.ad_client_id=$P{AD_CLIENT_ID} AND iv.docstatus IN ('CO','CL') AND (iv.AD_Org_ID=$P{AD_Org_ID} OR $P{AD_Org_ID} IS NULL) AND  inv.M_Product_ID=1004072 AND iv.movementdate >=$P{StartDate} AND iv.movementdate<=$P{EndDate}

UNION ALL
SELECT '9' AS "id",0 AS a3, 0 AS a4, 0 AS a5, 0 AS a6, sum(inv.qtyinternaluse) AS a7, 0 AS a8 FROM m_inventory iv 
INNER JOIN m_inventoryline inv ON iv.m_inventory_id = inv.m_inventory_id AND  iv.c_doctype_id =1000326 
WHERE iv.ad_client_id=$P{AD_CLIENT_ID} AND iv.docstatus IN ('CO','CL') AND (iv.AD_Org_ID=$P{AD_Org_ID} OR $P{AD_Org_ID} IS NULL) AND inv.M_Product_ID=1004072 AND iv.movementdate >=$P{StartDate} AND iv.movementdate<=$P{EndDate}
UNION ALL

SELECT '9' AS "id",0 AS a3, 0 AS a4, 0 AS a5, 0 AS a6,0 AS a7, sum(CASE WHEN inv.qtybook > inv.qtycount THEN inv.qtybook-inv.qtycount ELSE 0 END) AS a8
FROM M_Inventory iv 
INNER JOIN m_inventoryline inv ON iv.M_Inventory_id = inv.M_Inventory_id AND iv.c_doctype_id = 1000323 
WHERE iv.ad_client_id=$P{AD_CLIENT_ID} AND iv.docstatus IN ('CO','CL') AND (iv.AD_Org_ID=$P{AD_Org_ID} OR $P{AD_Org_ID} IS NULL) AND inv.M_Product_ID=1004072 AND iv.movementdate >=$P{StartDate} AND iv.movementdate<=$P{EndDate}
) AS k GROUP BY id
UNION ALL
SELECT '4' AS stt,id,'Ván sấy,khô loại C' AS a2, sum(a3) AS a3,sum(a4) AS a4,sum(a5) AS a5,sum(a6) AS a6,sum(a7) AS a7,sum(a8) AS a8
FROM (
SELECT '10' AS "id", sum(inv.productionqty) AS a3, 0 AS a4, 0 AS a5, 0 AS a6, 0 AS a7, 0 AS a8 FROM m_production iv
INNER JOIN m_productionplan inv ON iv.m_production_id = inv.m_production_id 
WHERE iv.ad_client_id=$P{AD_CLIENT_ID} AND iv.docstatus IN ('CO','CL') AND (iv.AD_Org_ID=$P{AD_Org_ID} OR $P{AD_Org_ID} IS NULL) AND inv.M_Product_ID=1004070 AND iv.movementdate >=$P{StartDate} AND iv.movementdate<=$P{EndDate}

UNION ALL

SELECT '10' AS "id",0 AS a3, sum(inv.movementqty) AS a4,0 AS a5, 0 AS a6, 0 AS a7, 0 AS a8 FROM m_inout iv
INNER JOIN m_inoutline inv ON iv.m_inout_id = inv.m_inout_id  AND issotrx = 'N'
WHERE iv.ad_client_id=$P{AD_CLIENT_ID} AND iv.docstatus IN ('CO','CL') AND (iv.AD_Org_ID=$P{AD_Org_ID} OR $P{AD_Org_ID} IS NULL) AND  inv.M_Product_ID=1004070 AND iv.movementdate >=$P{StartDate} AND iv.movementdate<=$P{EndDate}

UNION ALL

SELECT '10' AS "id",0 AS a3, 0 AS a4, sum(CASE WHEN inv.qtybook < inv.qtycount THEN inv.qtycount-inv.qtybook ELSE 0 END) AS a5, 0 AS a6, 0 AS a7, 0 AS a8 FROM M_Inventory iv 
INNER JOIN m_inventoryline inv ON iv.M_Inventory_id = inv.M_Inventory_id AND iv.c_doctype_id = 1000323 
WHERE iv.ad_client_id=$P{AD_CLIENT_ID} AND iv.docstatus IN ('CO','CL') AND (iv.AD_Org_ID=$P{AD_Org_ID} OR $P{AD_Org_ID} IS NULL) AND inv.M_Product_ID=1004070 AND iv.movementdate >=$P{StartDate} AND iv.movementdate<=$P{EndDate}

UNION ALL

SELECT '10' AS "id",0 AS a3, 0 AS a4, 0 AS a5,sum(inv.movementqty) AS a6, 0 AS a7, 0 AS a8 FROM m_inout iv
INNER JOIN m_inoutline inv ON iv.m_inout_id = inv.m_inout_id  AND issotrx = 'Y'
WHERE iv.ad_client_id=$P{AD_CLIENT_ID} AND iv.docstatus IN ('CO','CL') AND (iv.AD_Org_ID=$P{AD_Org_ID} OR $P{AD_Org_ID} IS NULL) AND  inv.M_Product_ID=1004070 AND iv.movementdate >=$P{StartDate} AND iv.movementdate<=$P{EndDate}

UNION ALL
SELECT '10' AS "id",0 AS a3, 0 AS a4, 0 AS a5, 0 AS a6, sum(inv.qtyinternaluse) AS a7, 0 AS a8 FROM m_inventory iv 
INNER JOIN m_inventoryline inv ON iv.m_inventory_id = inv.m_inventory_id AND  iv.c_doctype_id =1000326 
WHERE iv.ad_client_id=$P{AD_CLIENT_ID} AND iv.docstatus IN ('CO','CL') AND (iv.AD_Org_ID=$P{AD_Org_ID} OR $P{AD_Org_ID} IS NULL) AND inv.M_Product_ID=1004070 AND iv.movementdate >=$P{StartDate} AND iv.movementdate<=$P{EndDate}
UNION ALL

SELECT '10' AS "id",0 AS a3, 0 AS a4, 0 AS a5, 0 AS a6,0 AS a7, sum(CASE WHEN inv.qtybook > inv.qtycount THEN inv.qtybook-inv.qtycount ELSE 0 END) AS a8
FROM M_Inventory iv 
INNER JOIN m_inventoryline inv ON iv.M_Inventory_id = inv.M_Inventory_id AND iv.c_doctype_id = 1000323 
WHERE iv.ad_client_id=$P{AD_CLIENT_ID} AND iv.docstatus IN ('CO','CL') AND (iv.AD_Org_ID=$P{AD_Org_ID} OR $P{AD_Org_ID} IS NULL) AND inv.M_Product_ID=1004070 AND iv.movementdate >=$P{StartDate} AND iv.movementdate<=$P{EndDate}
) AS k GROUP BY id) 
as t
) AS t GROUP by id]]>
	</queryString>
	<field name="id" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.label" value="id"/>
	</field>
	<field name="a10" class="java.math.BigDecimal">
		<property name="com.jaspersoft.studio.field.label" value="a10"/>
	</field>
	<background>
		<band splitType="Stretch"/>
	</background>
	<detail>
		<band height="46" splitType="Stretch">
			<textField>
				<reportElement x="0" y="0" width="23" height="23" uuid="0031faf2-dea7-476f-9895-c6602333f8f1">
					<property name="com.jaspersoft.studio.unit.height" value="px"/>
					<property name="com.jaspersoft.studio.unit.width" value="px"/>
				</reportElement>
				<box leftPadding="2" rightPadding="2">
					<pen lineWidth="0.75"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Arial" size="11"/>
				</textElement>
				<textFieldExpression><![CDATA["III"]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="0" y="23" width="23" height="23" uuid="b230e8ca-2156-4b86-8b90-45c9920e916b">
					<property name="com.jaspersoft.studio.unit.height" value="px"/>
					<property name="com.jaspersoft.studio.unit.width" value="px"/>
				</reportElement>
				<box leftPadding="2" rightPadding="2">
					<pen lineWidth="0.75"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Arial" size="11"/>
				</textElement>
				<textFieldExpression><![CDATA["1"]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="23" y="0" width="728" height="23" uuid="b4b35ae3-c73e-4628-9c23-50560555d353">
					<property name="com.jaspersoft.studio.unit.width" value="px"/>
					<property name="com.jaspersoft.studio.unit.y" value="px"/>
				</reportElement>
				<box leftPadding="2" rightPadding="2">
					<pen lineWidth="0.75"/>
				</box>
				<textElement textAlignment="Left" verticalAlignment="Middle">
					<font fontName="Arial" size="11"/>
				</textElement>
				<text><![CDATA[Tỷ lệ nguyên liệu /thành phẩm 
]]></text>
			</staticText>
			<staticText>
				<reportElement x="23" y="23" width="644" height="23" uuid="7a5ecccb-46a9-46c7-a55a-0c692037e2db">
					<property name="com.jaspersoft.studio.unit.width" value="px"/>
				</reportElement>
				<box leftPadding="2" rightPadding="2">
					<pen lineWidth="0.75"/>
				</box>
				<textElement textAlignment="Left" verticalAlignment="Middle">
					<font fontName="Arial" size="11"/>
				</textElement>
				<text><![CDATA[Tỷ lệ thu hồi sấy  (Ván tươi/ ván sấy)
]]></text>
			</staticText>
			<textField>
				<reportElement x="667" y="23" width="84" height="23" uuid="21f63b9d-1ff5-415f-afdc-502e7f259d78">
					<property name="com.jaspersoft.studio.unit.width" value="px"/>
				</reportElement>
				<box leftPadding="2" rightPadding="2">
					<pen lineWidth="0.75"/>
				</box>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font fontName="Arial" size="11"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{a10}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
</jasperReport>
